{"version":3,"file":"static/development/pages/calendar.js","sources":["webpack:///webpack/bootstrap","webpack:///./components/AnimeSimCard.js","webpack:///./components/AnimeSimCard.module.scss","webpack:///./components/ConfirmModal.js","webpack:///./components/ConfirmModal.module.scss","webpack:///./components/DndBoard.js","webpack:///./components/DndBoard.module.scss","webpack:///./components/DndColumn.js","webpack:///./components/DndColumn.module.scss","webpack:///./components/DndItem.js","webpack:///./components/DndItem.module.scss","webpack:///./components/PreviewModal.js","webpack:///./containers/DndBoardCt.js","webpack:///./pages/calendar.js","webpack:///./pages/calendar.module.scss","webpack:///./utils/index.js","webpack:///external \"antd/lib/button\"","webpack:///external \"antd/lib/button/style/css\"","webpack:///external \"antd/lib/checkbox\"","webpack:///external \"antd/lib/checkbox/style/css\"","webpack:///external \"antd/lib/message\"","webpack:///external \"antd/lib/message/style/css\"","webpack:///external \"antd/lib/modal\"","webpack:///external \"antd/lib/modal/style/css\"","webpack:///external \"classnames/bind\"","webpack:///external \"lodash.omit\"","webpack:///external \"lodash.pick\"","webpack:///external \"prop-types\"","webpack:///external \"react\"","webpack:///external \"react-beautiful-dnd\"","webpack:///external \"react-css-modules\"","webpack:///external \"react-redux\"","webpack:///external \"why-did-you-update\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = require('../../../ssr-module-cache.js');\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","import React, { memo } from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './AnimeSimCard.module.scss'\nimport { Button, Icon, Checkbox } from 'antd'\nimport classNames from 'classnames/bind'\nconst cx = classNames.bind(styles)\n\nconst Field = memo(function Field({\n  label,\n  children,\n  onChange,\n  chooseAble = true,\n  checked\n}) {\n  return (\n    <div styleName=\"wrap\">\n      <div styleName=\"label\">{label}</div>\n      <div styleName=\"value\">{children}</div>\n      {!chooseAble ? null : (\n        <div styleName=\"use\">\n          <Checkbox checked={checked} onChange={onChange} />\n        </div>\n      )}\n    </div>\n  )\n})\n\nconst IDS = memo(function IDS({ ids }) {\n  return (\n    <div>\n      {Object.entries(ids).map(v => (\n        <div styleName=\"line\" key={v[0]}>\n          <span styleName=\"key\">{v[0]}</span>\n          <span styleName=\"key-value\">{v[1]}</span>\n        </div>\n      ))}\n    </div>\n  )\n})\n\nconst AnimeSimCard = memo(function AnimeSimCard(props) {\n  const { is = '', data = {}, onChoose, onChange, checks = {} } = props\n  const chooseAble = is && is !== 'RESULT'\n  const computeChecked = key =>\n    Array.isArray(checks[key])\n      ? checks[key].indexOf(is) > -1\n      : checks[key] === is\n  const handleChange = (e, key) => {\n    onChange(e.target.checked, key, data[key], is, data.from)\n  }\n  return (\n    <div className={cx('sim-card', is.toLowerCase())}>\n      {is ? <h3>{is}</h3> : null}\n      <Field chooseAble={false} label=\"来源\">\n        {(data.from || '').toString()}\n      </Field>\n      <Field chooseAble={false} label=\"ID\">\n        {data.id}\n      </Field>\n      {data.ids ? (\n        <Field chooseAble={false} label=\"IDs\">\n          <IDS ids={data.ids} />\n        </Field>\n      ) : null}\n      <Field\n        chooseAble={chooseAble}\n        label=\"封面\"\n        onChange={e => handleChange(e, 'cover')}\n        checked={computeChecked('cover')}\n      >\n        <img\n          styleName=\"cover\"\n          src={`https://dummyimage.com/200x200?text=${data.cover || 'NONE'}`}\n          alt=\"\"\n        />\n      </Field>\n      <Field\n        chooseAble={chooseAble}\n        label=\"番剧名\"\n        onChange={e => handleChange(e, 'name')}\n        checked={computeChecked('name')}\n      >\n        {data.name}\n      </Field>\n      <Field\n        chooseAble={chooseAble}\n        label=\"放送时间\"\n        onChange={e => handleChange(e, 'date')}\n        checked={computeChecked('date')}\n      >\n        {data.date}\n      </Field>\n      <Field\n        chooseAble={chooseAble}\n        label=\"其他\"\n        onChange={e => handleChange(e, 'some')}\n        checked={computeChecked('some')}\n      >\n        {data.some}\n      </Field>\n      {!is || is === 'RESULT' ? null : (\n        <div styleName=\"btn\">\n          <Button\n            onClick={() => onChoose(is)}\n            icon=\"check\"\n            size=\"small\"\n            type=\"primary\"\n          >\n            Use This\n          </Button>\n        </div>\n      )}\n    </div>\n  )\n})\n\nAnimeSimCard.propTypes = {\n  data: PropTypes.shape({\n    from: PropTypes.string,\n    cover: PropTypes.string,\n    name: PropTypes.string,\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  }),\n  is: PropTypes.oneOf(['TARGET', 'ORIGIN', 'RESULT']),\n  onChoose: PropTypes.func\n}\n\nexport default AnimeSimCard\n","module.exports = {\n\t\"sim-card\": \"components-___AnimeSimCard-module__sim-card___3PPyh\",\n\t\"mark\": \"components-___AnimeSimCard-module__mark___1eeoJ\",\n\t\"active\": \"components-___AnimeSimCard-module__active___2atzS\",\n\t\"wrap\": \"components-___AnimeSimCard-module__wrap___3mbEP\",\n\t\"label\": \"components-___AnimeSimCard-module__label___209ng\",\n\t\"value\": \"components-___AnimeSimCard-module__value___3FbWB\",\n\t\"use\": \"components-___AnimeSimCard-module__use___3wFnP\",\n\t\"cover\": \"components-___AnimeSimCard-module__cover___19XbU\",\n\t\"line\": \"components-___AnimeSimCard-module__line___23W29\",\n\t\"key\": \"components-___AnimeSimCard-module__key___zC70d\",\n\t\"key-value\": \"components-___AnimeSimCard-module__key-value___30vnD\",\n\t\"btn\": \"components-___AnimeSimCard-module__btn___4z5qO\"\n};","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Modal, message } from 'antd'\nimport AnimeSimCard from './AnimeSimCard'\nimport './ConfirmModal.module.scss'\nimport omit from 'lodash.omit'\n// import { wdyu } from '../utils'\n// wdyu(React)\n\n/**\n * model 的 from 属性表示来源，\n * 当 from 属性为字符串时，则表示该 model 为单一数据来源，也就意味着该 model 没有 ids 属性\n * 反之，当之为数组时，则表示该 model 为多数据来源，即 merge 之后的结果，同时该 model 具有 ids 属性\n */\n\nconst getIds = obj => {\n  const { id, ids, from } = obj\n  return ids ? ids : { [from]: id }\n}\n\nclass ConfirmModal extends Component {\n  static propTypes = {\n    visible: PropTypes.bool.isRequired,\n    handleCancel: PropTypes.func,\n    handleOk: PropTypes.func,\n    origin: PropTypes.object.isRequired,\n    target: PropTypes.object.isRequired\n  }\n\n  state = {\n    result: {},\n    checks: {},\n    ids: {}\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { origin, target, visible } = nextProps\n    const { ids: prevIds } = prevState\n    if (Object.keys(prevIds).length || !visible) {\n      return null\n    }\n    const ids = { ...getIds(origin), ...getIds(target) }\n    return {\n      ids,\n      checks: { id: ['TARGET', 'ORIGIN'] },\n      result: {\n        ids,\n        id: target.id,\n        _stems: target._stems,\n        from: Object.keys(ids)\n      }\n    }\n  }\n\n  shouldComponentUpdate = (nextProps, nextState) => {\n    if (!nextProps.visible && !this.props.visible) return false\n    return true\n  }\n\n  componentDidUpdate = (prevProps, prevState) => {\n    if (prevProps.visible && !this.props.visible) {\n      this.setState({\n        result: {},\n        checks: {},\n        ids: {}\n      })\n    }\n  }\n\n  handleChosen = is => {\n    const data = this.props[is.toLowerCase()]\n    const rest = omit(data, ['ids', 'from', '_stems'])\n    // 将除了 ids， _stems, from 之外的其他属性， merge 到 result 中,\n    // id 按理说已经没有意义了，因为 merge 之后有 ids 属性了。此时保留 id 属性仅仅是作为 dnd 的 draggableId & key。\n    this.setState(({ result, checks }) => {\n      return {\n        result: {\n          ...result,\n          ...rest\n        },\n        checks: Object.keys(rest).reduce(\n          (prev, key) => ({ ...prev, [key]: is }),\n          checks\n        )\n      }\n    })\n  }\n\n  onOk = () => {\n    const { ids, cover, name } = this.state.result\n    if (!ids || !cover || !name) {\n      message.warning('ids, 封面, 番剧名必选')\n      return\n    }\n    this.props.handleOk(this.state.result)\n  }\n\n  handleChange = (checked, key, value, obj) => {\n    console.log(checked, key, value, obj)\n    const { result, checks } = this.state\n    if (key !== 'id') {\n      this.setState({\n        result: { ...result, [key]: checked ? value : '' },\n        checks: { ...checks, [key]: checked ? obj : '' }\n      })\n      return\n    }\n  }\n\n  render() {\n    const { visible, handleCancel, origin, target } = this.props\n    const { result, checks } = this.state\n    return (\n      <Modal\n        title=\"选择卡片\"\n        visible={visible}\n        onOk={this.onOk}\n        onCancel={handleCancel}\n        width={1000}\n      >\n        <div styleName=\"body\">\n          <AnimeSimCard data={result} is={'RESULT'} />\n          <AnimeSimCard\n            data={target}\n            is={'TARGET'}\n            onChoose={this.handleChosen}\n            onChange={this.handleChange}\n            checks={checks}\n          />\n          <AnimeSimCard\n            data={origin}\n            is={'ORIGIN'}\n            onChoose={this.handleChosen}\n            onChange={this.handleChange}\n            checks={checks}\n          />\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default ConfirmModal\n","module.exports = {\n\t\"body\": \"components-___ConfirmModal-module__body___CoyEv\",\n\t\"divider\": \"components-___ConfirmModal-module__divider___1GanY\"\n};","import React, { memo } from 'react'\nimport PropTypes from 'prop-types'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport styles from './DndBoard.module.scss'\nimport DndColumn from './DndColumn'\n\nconst DndBoard = memo(function DndBoard(props) {\n  const { onDragEnd, keys, values, onPreview } = props\n  return (\n    <div>\n      <DragDropContext onDragEnd={onDragEnd}>\n        <Droppable\n          droppableId=\"board\"\n          type=\"COLUNN\"\n          direction=\"horizontal\"\n          isCombineEnabled={false}\n        >\n          {provided => (\n            <div\n              ref={provided.innerRef}\n              {...provided.droppableProps}\n              styleName=\"container\"\n            >\n              {keys.map((v, i) => (\n                <DndColumn\n                  list={values[v]}\n                  listId={v}\n                  title={v}\n                  index={i}\n                  key={v}\n                  onPreview={onPreview}\n                  styleName=\"dnd-item\"\n                />\n              ))}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n    </div>\n  )\n})\n\nDndBoard.propTypes = {\n  onDragEnd: PropTypes.func.isRequired,\n  keys: PropTypes.arrayOf(PropTypes.string).isRequired,\n  values: PropTypes.object.isRequired\n}\n\nexport default DndBoard\n","module.exports = {\n\t\"container\": \"components-___DndBoard-module__container___2J_Nr\",\n\t\"dnd-item\": \"components-___DndBoard-module__dnd-item___NTPk1\"\n};","import React, { memo } from 'react'\nimport PropTypes from 'prop-types'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport DndItem from './DndItem'\nimport styles from './DndColumn.module.scss'\nimport classNames from 'classnames/bind'\nconst cx = classNames.bind(styles)\n\nconst IQIYI = 'IQIYI'\nconst BILIBILI = 'BILIBILI'\nconst BANGUMI = 'BANGUMI'\nconst NAME_MAP = {\n  [IQIYI]: '爱奇艺',\n  [BILIBILI]: '哔哩哔哩动画',\n  [BANGUMI]: '番组计划'\n}\n\nconst Title = ({ title }) => {\n  switch (title) {\n    case BILIBILI:\n      return (\n        <span style={{ color: '#00a1d6' }}>\n          <em>from</em>\n          <i className=\"iconfont icon-bilibili-logo\" />\n        </span>\n      )\n    case IQIYI:\n      return (\n        <span style={{ color: '#00be06' }} className={cx('big-icon')}>\n          <em>from</em>\n          <i className=\"iconfont icon-aiqiyi\" />\n        </span>\n      )\n    default:\n      return (\n        <span style={{ color: '#fb7299' }}>\n          <em>from</em>\n          番组计划\n        </span>\n      )\n  }\n}\n\nconst DndColumn = memo(function DndColumn(props) {\n  const {\n    list,\n    listId,\n    title,\n    index,\n    isCombineEnabled = true,\n    onPreview,\n    ...rest\n  } = props\n  return (\n    <div {...rest} styleName=\"column-box\">\n      <h3 styleName=\"column-title\">\n        <Title title={title} />\n      </h3>\n      <Droppable\n        droppableId={listId}\n        index={index}\n        isCombineEnabled={isCombineEnabled}\n      >\n        {(provided, snapshot) => (\n          <div\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n            className={cx('column-body', {\n              'dragging-over': snapshot.isDraggingOver\n            })}\n            data-simplebar\n          >\n            {list.map((v, i) => (\n              <Draggable key={v.id} draggableId={v.id} index={i}>\n                {(dp, ds) => (\n                  <div\n                    ref={dp.innerRef}\n                    {...dp.dragHandleProps}\n                    {...dp.draggableProps}\n                    styleName=\"item-wrap\"\n                  >\n                    <DndItem\n                      isDraggingOver={Boolean(ds.combineTargetFor)}\n                      isDragging={ds.isDragging}\n                      {...v}\n                      onClick={() => onPreview(v)}\n                    />\n                  </div>\n                )}\n              </Draggable>\n            ))}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </div>\n  )\n})\n\nDndColumn.propTypes = {\n  list: PropTypes.array,\n  listId: PropTypes.string,\n  title: PropTypes.oneOf(Object.keys(NAME_MAP)),\n  index: PropTypes.number\n}\n\nexport default DndColumn\n","module.exports = {\n\t\"column-title\": \"components-___DndColumn-module__column-title___1Nh1a\",\n\t\"big-icon\": \"components-___DndColumn-module__big-icon___2Vngd\",\n\t\"item-wrap\": \"components-___DndColumn-module__item-wrap___13a4u\",\n\t\"column-body\": \"components-___DndColumn-module__column-body___hM5E9\",\n\t\"column-box\": \"components-___DndColumn-module__column-box___3-e1z\",\n\t\"dragging-over\": \"components-___DndColumn-module__dragging-over___2BrWx\"\n};","import React, { memo } from 'react'\nimport PropTypes from 'prop-types'\nimport styles from './DndItem.module.scss'\nimport classNames from 'classnames/bind'\nconst cx = classNames.bind(styles)\n\nconst sorts = {\n  bilibili: 0,\n  iqiyi: 1,\n  bangumi: 2\n}\n\nconst Icon = ({ from }) => {\n  switch (from) {\n    case 'bilibili':\n      return (\n        <i\n          style={{ color: '#00a1d6' }}\n          styleName=\"icon-font\"\n          className=\"iconfont icon-bilibili\"\n        />\n      )\n    case 'iqiyi':\n      return (\n        <i\n          style={{ color: '#00be06', fontSize: '1.2rem' }}\n          styleName=\"icon-font\"\n          className=\"iconfont icon-iqiyi\"\n        />\n      )\n    default:\n      return (\n        <i\n          style={{ color: '#fb7299', fontSize: '1.2rem' }}\n          styleName=\"icon-font\"\n          className=\"iconfont icon-fanju\"\n        />\n      )\n  }\n}\n\nconst DndItem = memo(function DndItem(props) {\n  const from = Array.isArray(props.from)\n    ? props.from.sort((a, b) => sorts[a] - sorts[b])\n    : [props.from]\n  return (\n    <div\n      className={cx('container', {\n        dragging: props.isDragging,\n        'dragging-over': props.isDraggingOver\n      })}\n    >\n      <div styleName=\"cover\" onClick={props.onClick}>\n        <img\n          src={`https://dummyimage.com/120x120?text=${props.cover}`}\n          alt=\"\"\n        />\n      </div>\n      <div styleName=\"box\">\n        <div styleName=\"title\">{props.name}</div>\n        <div styleName=\"some\">\n          {from.map(v => (\n            <Icon from={v} key={v} />\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n})\n\nDndItem.propTypes = {\n  name: PropTypes.string,\n  from: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string)\n  ]),\n  isDragging: PropTypes.bool,\n  isDraggingOver: PropTypes.bool,\n  cover: PropTypes.string,\n  onClick: PropTypes.func\n}\n\nexport default DndItem\n","module.exports = {\n\t\"container\": \"components-___DndItem-module__container___20A5X\",\n\t\"dragging\": \"components-___DndItem-module__dragging___Kj5Vg\",\n\t\"dragging-over\": \"components-___DndItem-module__dragging-over___1FnHt\",\n\t\"cover\": \"components-___DndItem-module__cover___1TnmP\",\n\t\"icon-font\": \"components-___DndItem-module__icon-font___3eK8o\",\n\t\"font-wrap\": \"components-___DndItem-module__font-wrap___1r740\",\n\t\"box\": \"components-___DndItem-module__box___19GuX\",\n\t\"title\": \"components-___DndItem-module__title___2jSOa\",\n\t\"some\": \"components-___DndItem-module__some___1IH16\"\n};","import React, { memo } from 'react'\nimport PropTypes from 'prop-types'\nimport { Modal } from 'antd'\nimport AnimeSimCard from './AnimeSimCard'\n\nconst PreviewModal = memo(function PreviewModal(props) {\n  return (\n    <Modal\n      title=\"详情\"\n      visible={props.visible}\n      footer={null}\n      onCancel={props.hidePreview}\n    >\n      <div className=\"f__center\" style={{ paddingBottom: '2rem' }}>\n        <AnimeSimCard data={props.data} />\n      </div>\n    </Modal>\n  )\n})\n\nPreviewModal.propTypes = {\n  visible: PropTypes.bool,\n  data: PropTypes.object,\n  hidePreview: PropTypes.func\n}\n\nexport default PreviewModal\n","import React, { Component, Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport DndBoard from '../components/DndBoard'\nimport ConfirmModal from '../components/ConfirmModal'\nimport PreviewModal from '../components/PreviewModal'\nimport pick from 'lodash.pick'\nimport { reorder, reorderQuoteMap, combinedQuoteMap } from '../utils'\n\nclass DndBoardCt extends Component {\n  isSameSource = false\n\n  state = {\n    BANGUMI: [\n      { id: 1, from: 'bangumi', name: '兔女郎学姐', cover: 'xx1.png' },\n      { id: 2, from: 'bangumi', name: 'jojo', cover: 'xxj2.png' },\n      { id: 3, from: 'bangumi', name: '史莱姆', cover: 'xx2.png' },\n      { id: 4, from: 'bangumi', name: '风', cover: 'xxf2.png' },\n      { id: 5, from: 'bangumi', name: '哥杀', cover: 'xx2.png' },\n      { id: 6, from: 'bangumi', name: '啦啦啦啦', cover: 'xx2.png' },\n      { id: 7, from: 'bangumi', name: '想不起来了', cover: 'xx2.png' },\n      { id: 9, from: 'bangumi', name: '幸运星', cover: 'xx2.png' },\n      { id: 10, from: 'bangumi', name: '团长', cover: 'xx2.png' }\n    ],\n    BILIBILI: [\n      { id: 2414, from: 'bilibili', name: '青春兔女郎学姐', cover: 'bb1.png' },\n      { id: 7492, from: 'bilibili', name: 'ssss', cover: 'bb2.png' },\n      { id: 8344, from: 'bilibili', name: '全金属', cover: 'xxqq2.png' }\n    ],\n    IQIYI: [\n      { id: 145, from: 'iqiyi', name: '哥布林杀手', cover: 'ii1.png' },\n      { id: 144, from: 'iqiyi', name: '其他', cover: 'ii2.png' }\n    ],\n    visible: false,\n    target: {},\n    origin: {},\n    preivew: false,\n    pvData: {}\n  }\n\n  onDragEnd = result => {\n    console.log(result)\n    this.cache = result\n    const { combine, source, destination, type } = result\n    if (combine) {\n      this.handleMerge(type, source, combine)\n      return\n    }\n    this.handleSort(destination, source)\n  }\n\n  /**\n   * merge\n   * @memberof DndBoardCt\n   */\n  handleMerge = (type, source, combine) => {\n    if (type === 'COLUMN') {\n      return\n    }\n    this.isSameSource = source.droppableId === combine.droppableId\n    const data = combinedQuoteMap({\n      quoteMap: this.state,\n      source,\n      combine\n    })\n    this.setState(\n      {\n        ...data.quoteMap,\n        origin: data.origin,\n        target: data.target,\n        visible: true\n      },\n      () => {\n        console.log('this.state.origin', this.state.origin)\n        console.log('this.state.target', this.state.target)\n      }\n    )\n  }\n\n  /**\n   * resort\n   * @memberof DndBoardCt\n   */\n  handleSort = (destination, source) => {\n    if (!destination) return\n    if (\n      source.droppableId === destination.droppableId &&\n      source.index === destination.index\n    ) {\n      return\n    }\n    const data = reorderQuoteMap({\n      quoteMap: this.state,\n      source,\n      destination\n    })\n    this.setState({\n      ...data.quoteMap\n    })\n  }\n\n  handleOk = result => {\n    // debugger\n    // 需要区分 merge 的数据源是否一致，若不一致，则无影响\n    // 若一致，则不能使用以下处理。因为在 combinedQuoteMap 操作中，会暂时删除 origin。\n    // 可能会导致 _stems 记录的index 和 数据源 column 的 length 起冲突。针对同一数据源的 merge\n    // 应当先 merge 在 del\n    console.log('result', result)\n    const { index, from } = result._stems\n    delete result._stems\n    if (!this.isSameSource) {\n      const prevList = this.state[from]\n      this.setState({\n        [from]: [\n          ...prevList.slice(0, index),\n          result,\n          ...prevList.slice(index + 1)\n        ],\n        origin: {},\n        target: {},\n        visible: false\n      })\n      return\n    }\n    const original = this.handleCancel(false)\n    const _new = [\n      ...original.slice(0, index),\n      result,\n      ...original.slice(index + 1)\n    ].filter(v => !v._stems)\n    this.setState({\n      [from]: _new,\n      origin: {},\n      target: {},\n      visible: false\n    })\n  }\n  handleCancel = (ss = true) => {\n    // 取消 ‘暂时删除origin’ 的操作\n    const { origin } = this.state\n    const { index, from } = origin._stems\n    const list = this.state[from]\n    const original = [...list.slice(0, index), origin, ...list.slice(index)]\n    if (!ss) {\n      return original\n    }\n    delete origin._stems\n    this.setState({\n      [from]: original,\n      origin: {},\n      target: {},\n      visible: false\n    })\n  }\n\n  handlePreivew = data => {\n    this.setState({\n      pvData: data,\n      preview: true\n    })\n  }\n\n  render() {\n    const list = ['BANGUMI', 'BILIBILI', 'IQIYI']\n    const { visible, target, origin, preview, pvData } = this.state\n    const values = pick(this.state, list)\n    return (\n      <Fragment>\n        <DndBoard\n          values={values}\n          keys={list}\n          onDragEnd={this.onDragEnd}\n          onPreview={this.handlePreivew}\n        />\n        <ConfirmModal\n          visible={visible}\n          target={target}\n          origin={origin}\n          handleOk={this.handleOk}\n          handleCancel={this.handleCancel}\n        />\n        <PreviewModal\n          visible={preview}\n          data={pvData}\n          hidePreview={() =>\n            this.setState({\n              preview: false\n            })\n          }\n        />\n      </Fragment>\n    )\n  }\n}\n\nexport default DndBoardCt\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styles from './calendar.module.scss'\nimport cssModules from 'react-css-modules'\nimport DndBoardCt from '../containers/DndBoardCt'\n\nclass Calendar extends Component {\n  static propTypes = {\n    // prop: PropTypes\n  }\n\n  render() {\n    return <DndBoardCt />\n  }\n}\n\nconst mapStateToProps = state => ({})\n\nconst mapDispatchToProps = {}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Calendar)\n","module.exports = {\n\t\"test\": \"pages-___calendar-module__test___1rUV3\"\n};","import { whyDidYouUpdate } from 'why-did-you-update'\n\nexport const wdyu = React => {\n  if (process.env.NODE_ENV !== 'production') {\n    whyDidYouUpdate(React)\n  }\n}\n\nexport const reorder = (list, startIndex, endIndex) => {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n\n  return result\n}\n\nexport const reorderQuoteMap = ({ quoteMap, source, destination }) => {\n  const current = [...quoteMap[source.droppableId]]\n  const next = [...quoteMap[destination.droppableId]]\n  const target = current[source.index]\n\n  // 同一list drag\n  if (source.droppableId === destination.droppableId) {\n    const reordered = reorder(current, source.index, destination.index)\n    const result = {\n      ...quoteMap,\n      [source.droppableId]: reordered\n    }\n    return {\n      quoteMap: result\n    }\n  }\n  // 不同list drag\n  current.splice(source.index, 1)\n  next.splice(destination.index, 0, target)\n  const result = {\n    ...quoteMap,\n    [source.droppableId]: current,\n    [destination.droppableId]: next\n  }\n  return {\n    quoteMap: result\n  }\n}\n\nexport const combinedQuoteMap = ({ quoteMap, source, combine }) => {\n  const originList = [...quoteMap[source.droppableId]]\n  const targetList = [...quoteMap[combine.droppableId]]\n  const origin = { ...originList[source.index] }\n  const targetIndex = targetList.findIndex(v => v.id === combine.draggableId)\n  const target = { ...targetList[targetIndex] }\n  // 保存来源，便于 merge 或者取消\n  origin._stems = {\n    index: source.index,\n    from: source.droppableId\n  }\n  target._stems = {\n    index: targetIndex,\n    from: combine.droppableId\n  }\n  // todo\n  // 1> 暂时删除origin\n  // 2> 返回target & origin\n  originList.splice(source.index, 1)\n  let result = {}\n  if (combine.droppableId !== source.droppableId) {\n    result = {\n      ...quoteMap,\n      [combine.droppableId]: targetList,\n      [source.droppableId]: originList\n    }\n  } else {\n    result = {\n      ...quoteMap,\n      [combine.droppableId]: originList\n    }\n  }\n  return {\n    quoteMap: result,\n    origin,\n    target\n  }\n}\n","module.exports = require(\"antd/lib/button\");","module.exports = require(\"antd/lib/button/style/css\");","module.exports = require(\"antd/lib/checkbox\");","module.exports = require(\"antd/lib/checkbox/style/css\");","module.exports = require(\"antd/lib/message\");","module.exports = require(\"antd/lib/message/style/css\");","module.exports = require(\"antd/lib/modal\");","module.exports = require(\"antd/lib/modal/style/css\");","module.exports = require(\"classnames/bind\");","module.exports = require(\"lodash.omit\");","module.exports = require(\"lodash.pick\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-beautiful-dnd\");","module.exports = require(\"react-css-modules\");","module.exports = require(\"react-redux\");","module.exports = require(\"why-did-you-update\");"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxFA;AACA;AACA;AAEA;AACA;AAEA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;AAQA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAA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","sourceRoot":""}